var e,t,n=Object.defineProperty,r=(e,t,r)=>(((e,t,r)=>{t in e?n(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r})(e,"symbol"!=typeof t?t+"":t,r),r);import{W as i}from"./ethers-vendor.js";import"./react-vendor.js";class s{constructor(){r(this,"isInitialized",!1),this.initialize()}async initialize(){try{if(!(await this.sendMessage("checkPermission",{method:"web3"})))return;this.isInitialized=!0,this.injectProvider()}catch(e){}}injectProvider(){const e=new i({send:async(e,t)=>{try{t(null,await this.sendMessage("retrieveData",{key:e.method}))}catch(n){t(n,null)}}});window.ethereum=e}async sendMessage(e,t){return new Promise(((n,r)=>{chrome.runtime.sendMessage({type:e,data:t},(e=>{chrome.runtime.lastError?r(chrome.runtime.lastError):e.success?n(e.value):r(new Error(e.error))}))}))}}(null==(e=globalThis.browser)?void 0:e.tabs)||null==(t=globalThis.chrome)||t.tabs;var o=async e=>(()=>{var e,t;let n=(null==(e=globalThis.browser)?void 0:e.runtime)||(null==(t=globalThis.chrome)?void 0:t.runtime);if(!n)throw new Error("Extension runtime is not available");return n})().sendMessage(e.extensionId??null,e);async function a(e){return await o({name:"wallet",body:{type:"SWITCH_CHAIN",payload:{origin:window.location.origin,chainId:e}}})}new s;new MutationObserver((()=>{var e;const t=document.querySelector(".network-badge");if(t){const n=null==(e=t.textContent)?void 0:e.toLowerCase();(null==n?void 0:n.includes("polygon"))?a("0x89"):(null==n?void 0:n.includes("ethereum"))&&a("0x1")}})).observe(document.body,{childList:!0,subtree:!0}),window.addEventListener("message",(e=>{var t,n;if(e.source!==window)return;if(!(null==(n=null==(t=e.data)?void 0:t.type)?void 0:n.startsWith("FREOBUS_")))return;const{type:r}=e.data;if("FREOBUS_READY"===r)window.postMessage({type:"FREOBUS_PROVIDER_READY"},"*")}));
