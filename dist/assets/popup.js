var e=Object.defineProperty,t=(t,n,r)=>(((t,n,r)=>{n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r})(t,"symbol"!=typeof n?n+"":n,r),r);import{r as n,R as r,b as a,d as s}from"./react-vendor.js";import{walletService as i}from"./wallet.js";import{e as o}from"./events.js";import{i as c,W as l}from"./ethers-vendor.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var d={exports:{}},u={},h=n,m=Symbol.for("react.element"),p=Symbol.for("react.fragment"),f=Object.prototype.hasOwnProperty,y=h.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,g={key:!0,ref:!0,__self:!0,__source:!0};function v(e,t,n){var r,a={},s=null,i=null;for(r in void 0!==n&&(s=""+n),void 0!==t.key&&(s=""+t.key),void 0!==t.ref&&(i=t.ref),t)f.call(t,r)&&!g.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:m,type:e,key:s,ref:i,props:a,_owner:y.current}}u.Fragment=p,u.jsx=v,u.jsxs=v,d.exports=u;var b=d.exports;var w=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(r){}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){var t;return null==(t=e.parentNode)?void 0:t.removeChild(e)})),this.tags=[],this.ctr=0},e}(),N="-ms-",k="-moz-",S="-webkit-",C="comm",x="rule",P="decl",E="@keyframes",$=Math.abs,A=String.fromCharCode,L=Object.assign;function R(e){return e.trim()}function I(e,t,n){return e.replace(t,n)}function _(e,t){return e.indexOf(t)}function T(e,t){return 0|e.charCodeAt(t)}function F(e,t,n){return e.slice(t,n)}function O(e){return e.length}function D(e){return e.length}function U(e,t){return t.push(e),e}var M=1,W=1,z=0,q=0,G=0,j="";function H(e,t,n,r,a,s,i){return{value:e,root:t,parent:n,type:r,props:a,children:s,line:M,column:W,length:i,return:""}}function B(e,t){return L(H("",null,null,"",null,null,0),e,{length:-e.length},t)}function Y(){return G=q<z?T(j,q++):0,W++,10===G&&(W=1,M++),G}function V(){return T(j,q)}function K(){return q}function Z(e,t){return F(j,e,t)}function J(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Q(e){return M=W=1,z=O(j=e),q=0,[]}function X(e){return j="",e}function ee(e){return R(Z(q-1,re(91===e?e+2:40===e?e+1:e)))}function te(e){for(;(G=V())&&G<33;)Y();return J(e)>2||J(G)>3?"":" "}function ne(e,t){for(;--t&&Y()&&!(G<48||G>102||G>57&&G<65||G>70&&G<97););return Z(e,K()+(t<6&&32==V()&&32==Y()))}function re(e){for(;Y();)switch(G){case e:return q;case 34:case 39:34!==e&&39!==e&&re(G);break;case 40:41===e&&re(e);break;case 92:Y()}return q}function ae(e,t){for(;Y()&&e+G!==57&&(e+G!==84||47!==V()););return"/*"+Z(t,q-1)+"*"+A(47===e?e:Y())}function se(e){for(;!J(V());)Y();return Z(e,q)}function ie(e){return X(oe("",null,null,null,[""],e=Q(e),0,[0],e))}function oe(e,t,n,r,a,s,i,o,c){for(var l=0,d=0,u=i,h=0,m=0,p=0,f=1,y=1,g=1,v=0,b="",w=a,N=s,k=r,S=b;y;)switch(p=v,v=Y()){case 40:if(108!=p&&58==T(S,u-1)){-1!=_(S+=I(ee(v),"&","&\f"),"&\f")&&(g=-1);break}case 34:case 39:case 91:S+=ee(v);break;case 9:case 10:case 13:case 32:S+=te(p);break;case 92:S+=ne(K()-1,7);continue;case 47:switch(V()){case 42:case 47:U(le(ae(Y(),K()),t,n),c);break;default:S+="/"}break;case 123*f:o[l++]=O(S)*g;case 125*f:case 59:case 0:switch(v){case 0:case 125:y=0;case 59+d:-1==g&&(S=I(S,/\f/g,"")),m>0&&O(S)-u&&U(m>32?de(S+";",r,n,u-1):de(I(S," ","")+";",r,n,u-2),c);break;case 59:S+=";";default:if(U(k=ce(S,t,n,l,d,a,o,b,w=[],N=[],u),s),123===v)if(0===d)oe(S,t,k,k,w,s,u,o,N);else switch(99===h&&110===T(S,3)?100:h){case 100:case 108:case 109:case 115:oe(e,k,k,r&&U(ce(e,k,k,0,0,a,o,b,a,w=[],u),N),a,N,u,o,r?w:N);break;default:oe(S,k,k,k,[""],N,0,o,N)}}l=d=m=0,f=g=1,b=S="",u=i;break;case 58:u=1+O(S),m=p;default:if(f<1)if(123==v)--f;else if(125==v&&0==f++&&125==(G=q>0?T(j,--q):0,W--,10===G&&(W=1,M--),G))continue;switch(S+=A(v),v*f){case 38:g=d>0?1:(S+="\f",-1);break;case 44:o[l++]=(O(S)-1)*g,g=1;break;case 64:45===V()&&(S+=ee(Y())),h=V(),d=u=O(b=S+=se(K())),v++;break;case 45:45===p&&2==O(S)&&(f=0)}}return s}function ce(e,t,n,r,a,s,i,o,c,l,d){for(var u=a-1,h=0===a?s:[""],m=D(h),p=0,f=0,y=0;p<r;++p)for(var g=0,v=F(e,u+1,u=$(f=i[p])),b=e;g<m;++g)(b=R(f>0?h[g]+" "+v:I(v,/&\f/g,h[g])))&&(c[y++]=b);return H(e,t,n,0===a?x:o,c,l,d)}function le(e,t,n){return H(e,t,n,C,A(G),F(e,2,-2),0)}function de(e,t,n,r){return H(e,t,n,P,F(e,0,r),F(e,r+1,-1),r)}function ue(e,t){for(var n="",r=D(e),a=0;a<r;a++)n+=t(e[a],a,e,t)||"";return n}function he(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case P:return e.return=e.return||e.value;case C:return"";case E:return e.return=e.value+"{"+ue(e.children,r)+"}";case x:e.value=e.props.join(",")}return O(n=ue(e.children,r))?e.return=e.value+"{"+n+"}":""}function me(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}var pe=function(e,t,n){for(var r=0,a=0;r=a,a=V(),38===r&&12===a&&(t[n]=1),!J(a);)Y();return Z(e,q)},fe=function(e,t){return X(function(e,t){var n=-1,r=44;do{switch(J(r)){case 0:38===r&&12===V()&&(t[n]=1),e[n]+=pe(q-1,t,n);break;case 2:e[n]+=ee(r);break;case 4:if(44===r){e[++n]=58===V()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=A(r)}}while(r=Y());return e}(Q(e),t))},ye=new WeakMap,ge=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||ye.get(n))&&!r){ye.set(e,!0);for(var a=[],s=fe(t,a),i=n.props,o=0,c=0;o<s.length;o++)for(var l=0;l<i.length;l++,c++)e.props[c]=a[o]?s[o].replace(/&\f/g,i[l]):i[l]+" "+s[o]}}},ve=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function be(e,t){switch(function(e,t){return 45^T(e,0)?(((t<<2^T(e,0))<<2^T(e,1))<<2^T(e,2))<<2^T(e,3):0}(e,t)){case 5103:return S+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return S+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return S+e+k+e+N+e+e;case 6828:case 4268:return S+e+N+e+e;case 6165:return S+e+N+"flex-"+e+e;case 5187:return S+e+I(e,/(\w+).+(:[^]+)/,S+"box-$1$2"+N+"flex-$1$2")+e;case 5443:return S+e+N+"flex-item-"+I(e,/flex-|-self/,"")+e;case 4675:return S+e+N+"flex-line-pack"+I(e,/align-content|flex-|-self/,"")+e;case 5548:return S+e+N+I(e,"shrink","negative")+e;case 5292:return S+e+N+I(e,"basis","preferred-size")+e;case 6060:return S+"box-"+I(e,"-grow","")+S+e+N+I(e,"grow","positive")+e;case 4554:return S+I(e,/([^-])(transform)/g,"$1"+S+"$2")+e;case 6187:return I(I(I(e,/(zoom-|grab)/,S+"$1"),/(image-set)/,S+"$1"),e,"")+e;case 5495:case 3959:return I(e,/(image-set\([^]*)/,S+"$1$`$1");case 4968:return I(I(e,/(.+:)(flex-)?(.*)/,S+"box-pack:$3"+N+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+S+e+e;case 4095:case 3583:case 4068:case 2532:return I(e,/(.+)-inline(.+)/,S+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(O(e)-1-t>6)switch(T(e,t+1)){case 109:if(45!==T(e,t+4))break;case 102:return I(e,/(.+:)(.+)-([^]+)/,"$1"+S+"$2-$3$1"+k+(108==T(e,t+3)?"$3":"$2-$3"))+e;case 115:return~_(e,"stretch")?be(I(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==T(e,t+1))break;case 6444:switch(T(e,O(e)-3-(~_(e,"!important")&&10))){case 107:return I(e,":",":"+S)+e;case 101:return I(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+S+(45===T(e,14)?"inline-":"")+"box$3$1"+S+"$2$3$1"+N+"$2box$3")+e}break;case 5936:switch(T(e,t+11)){case 114:return S+e+N+I(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return S+e+N+I(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return S+e+N+I(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return S+e+N+e+e}return e}var we=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case P:e.return=be(e.value,e.length);break;case E:return ue([B(e,{value:I(e.value,"@","@"+S)})],r);case x:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return ue([B(e,{props:[I(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return ue([B(e,{props:[I(t,/:(plac\w+)/,":"+S+"input-$1")]}),B(e,{props:[I(t,/:(plac\w+)/,":-moz-$1")]}),B(e,{props:[I(t,/:(plac\w+)/,N+"input-$1")]})],r)}return""}))}}],Ne=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var r,a,s=e.stylisPlugins||we,i={},o=[];r=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)i[t[n]]=!0;o.push(e)}));var c,l,d,u,h=[he,(u=function(e){c.insert(e)},function(e){e.root||(e=e.return)&&u(e)})],m=(l=[ge,ve].concat(s,h),d=D(l),function(e,t,n,r){for(var a="",s=0;s<d;s++)a+=l[s](e,t,n,r)||"";return a});a=function(e,t,n,r){c=n,ue(ie(e?e+"{"+t.styles+"}":t.styles),m),r&&(p.inserted[t.name]=!0)};var p={key:t,sheet:new w({key:t,container:r,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:i,registered:{},insert:a};return p.sheet.hydrate(o),p},ke={exports:{}},Se={},Ce="function"==typeof Symbol&&Symbol.for,xe=Ce?Symbol.for("react.element"):60103,Pe=Ce?Symbol.for("react.portal"):60106,Ee=Ce?Symbol.for("react.fragment"):60107,$e=Ce?Symbol.for("react.strict_mode"):60108,Ae=Ce?Symbol.for("react.profiler"):60114,Le=Ce?Symbol.for("react.provider"):60109,Re=Ce?Symbol.for("react.context"):60110,Ie=Ce?Symbol.for("react.async_mode"):60111,_e=Ce?Symbol.for("react.concurrent_mode"):60111,Te=Ce?Symbol.for("react.forward_ref"):60112,Fe=Ce?Symbol.for("react.suspense"):60113,Oe=Ce?Symbol.for("react.suspense_list"):60120,De=Ce?Symbol.for("react.memo"):60115,Ue=Ce?Symbol.for("react.lazy"):60116,Me=Ce?Symbol.for("react.block"):60121,We=Ce?Symbol.for("react.fundamental"):60117,ze=Ce?Symbol.for("react.responder"):60118,qe=Ce?Symbol.for("react.scope"):60119;function Ge(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case xe:switch(e=e.type){case Ie:case _e:case Ee:case Ae:case $e:case Fe:return e;default:switch(e=e&&e.$$typeof){case Re:case Te:case Ue:case De:case Le:return e;default:return t}}case Pe:return t}}}function je(e){return Ge(e)===_e}Se.AsyncMode=Ie,Se.ConcurrentMode=_e,Se.ContextConsumer=Re,Se.ContextProvider=Le,Se.Element=xe,Se.ForwardRef=Te,Se.Fragment=Ee,Se.Lazy=Ue,Se.Memo=De,Se.Portal=Pe,Se.Profiler=Ae,Se.StrictMode=$e,Se.Suspense=Fe,Se.isAsyncMode=function(e){return je(e)||Ge(e)===Ie},Se.isConcurrentMode=je,Se.isContextConsumer=function(e){return Ge(e)===Re},Se.isContextProvider=function(e){return Ge(e)===Le},Se.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===xe},Se.isForwardRef=function(e){return Ge(e)===Te},Se.isFragment=function(e){return Ge(e)===Ee},Se.isLazy=function(e){return Ge(e)===Ue},Se.isMemo=function(e){return Ge(e)===De},Se.isPortal=function(e){return Ge(e)===Pe},Se.isProfiler=function(e){return Ge(e)===Ae},Se.isStrictMode=function(e){return Ge(e)===$e},Se.isSuspense=function(e){return Ge(e)===Fe},Se.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===Ee||e===_e||e===Ae||e===$e||e===Fe||e===Oe||"object"==typeof e&&null!==e&&(e.$$typeof===Ue||e.$$typeof===De||e.$$typeof===Le||e.$$typeof===Re||e.$$typeof===Te||e.$$typeof===We||e.$$typeof===ze||e.$$typeof===qe||e.$$typeof===Me)},Se.typeOf=Ge,ke.exports=Se;var He=ke.exports,Be={};Be[He.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Be[He.Memo]={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0};var Ye=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)};var Ve={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Ke=/[A-Z]|^ms/g,Ze=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Je=function(e){return 45===e.charCodeAt(1)},Qe=function(e){return null!=e&&"boolean"!=typeof e},Xe=me((function(e){return Je(e)?e:e.replace(Ke,"-$&").toLowerCase()})),et=function(e,t){switch(e){case"animation":case"animationName":if("string"==typeof t)return t.replace(Ze,(function(e,t,n){return nt={name:t,styles:n,next:nt},t}))}return 1===Ve[e]||Je(e)||"number"!=typeof t||0===t?t:t+"px"};function tt(e,t,n){if(null==n)return"";var r=n;if(void 0!==r.__emotion_styles)return r;switch(typeof n){case"boolean":return"";case"object":var a=n;if(1===a.anim)return nt={name:a.name,styles:a.styles,next:nt},a.name;var s=n;if(void 0!==s.styles){var i=s.next;if(void 0!==i)for(;void 0!==i;)nt={name:i.name,styles:i.styles,next:nt},i=i.next;return s.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var a=0;a<n.length;a++)r+=tt(e,t,n[a])+";";else for(var s in n){var i=n[s];if("object"!=typeof i){var o=i;null!=t&&void 0!==t[o]?r+=s+"{"+t[o]+"}":Qe(o)&&(r+=Xe(s)+":"+et(s,o)+";")}else if(!Array.isArray(i)||"string"!=typeof i[0]||null!=t&&void 0!==t[i[0]]){var c=tt(e,t,i);switch(s){case"animation":case"animationName":r+=Xe(s)+":"+c+";";break;default:r+=s+"{"+c+"}"}}else for(var l=0;l<i.length;l++)Qe(i[l])&&(r+=Xe(s)+":"+et(s,i[l])+";")}return r}(e,t,n);case"function":if(void 0!==e){var o=nt,c=n(e);return nt=o,tt(e,t,c)}}var l=n;if(null==t)return l;var d=t[l];return void 0!==d?d:l}var nt,rt=/label:\s*([^\s;{]+)\s*(;|$)/g;var at=!!r.useInsertionEffect&&r.useInsertionEffect||function(e){return e()},st=n.createContext("undefined"!=typeof HTMLElement?Ne({key:"css"}):null);st.Provider;var it,ot=function(e){return n.forwardRef((function(t,r){var a=n.useContext(st);return e(t,a,r)}))},ct=n.createContext({}),lt={}.hasOwnProperty,dt="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",ut=function(e,t){var n={};for(var r in t)lt.call(t,r)&&(n[r]=t[r]);return n[dt]=e,n},ht=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return Ye(t,n,r),at((function(){return function(e,t,n){Ye(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var a=t;do{e.insert(t===a?"."+r:"",a,e.sheet,!0),a=a.next}while(void 0!==a)}}(t,n,r)})),null},mt=ot((function(e,t,r){var a=e.css;"string"==typeof a&&void 0!==t.registered[a]&&(a=t.registered[a]);var s=e[dt],i=[a],o="";"string"==typeof e.className?o=function(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):n&&(r+=n+" ")})),r}(t.registered,i,e.className):null!=e.className&&(o=e.className+" ");var c=function(e,t,n){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,a="";nt=void 0;var s=e[0];null==s||void 0===s.raw?(r=!1,a+=tt(n,t,s)):a+=s[0];for(var i=1;i<e.length;i++)a+=tt(n,t,e[i]),r&&(a+=s[i]);rt.lastIndex=0;for(var o,c="";null!==(o=rt.exec(a));)c+="-"+o[1];return{name:function(e){for(var t,n=0,r=0,a=e.length;a>=4;++r,a-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(a){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(a)+c,styles:a,next:nt}}(i,void 0,n.useContext(ct));o+=t.key+"-"+c.name;var l={};for(var d in e)lt.call(e,d)&&"css"!==d&&d!==dt&&(l[d]=e[d]);return l.className=o,r&&(l.ref=r),n.createElement(n.Fragment,null,n.createElement(ht,{cache:t,serialized:c,isStringTag:"string"==typeof s}),n.createElement(s,l))})),pt=b.Fragment,ft=function(e,t,n){return lt.call(t,"css")?b.jsx(mt,ut(e,t),n):b.jsx(e,t,n)},yt=function(e,t,n){return lt.call(t,"css")?b.jsxs(mt,ut(e,t),n):b.jsxs(e,t,n)},gt=a;it=gt.createRoot,gt.hydrateRoot;const vt=({onGetStarted:e,onConnect:t})=>{const[r,a]=n.useState(!1),[s,o]=n.useState(null);return yt("div",{className:"welcome-container",children:[yt("div",{className:"welcome-header",children:[ft("img",{src:"/logo.png",alt:"FreoWallet",className:"logo"}),ft("h1",{children:"Welcome to FreoWallet"}),ft("p",{className:"subtitle",children:"Your secure gateway to Web3"})]}),s&&ft("div",{className:"error-message",role:"alert",children:s}),yt("div",{className:"action-buttons",children:[ft("button",{className:"action-button primary",onClick:async()=>{a(!0),o(null);try{await i.isInitialized()?t():o("No existing wallet found. Please create a new wallet or restore an existing one.")}catch(e){o("Failed to check wallet status. Please try again.")}finally{a(!1)}},disabled:r,children:r?"Checking...":"Connect Wallet"}),ft("button",{className:"action-button secondary",onClick:e,children:"Create New Wallet"})]}),ft("div",{className:"welcome-footer",children:ft("p",{className:"security-note",children:"🔒 Your keys, your crypto. We never store your seed phrase or private keys."})})]})},bt=({privateKey:e,onClose:t})=>{const[r,a]=n.useState(!1),[s,i]=n.useState(!1);return ft("div",{className:"modal-overlay",children:yt("div",{className:"modal-content",children:[ft("h3",{children:"Export Private Key"}),yt("div",{className:"warning-box",style:{color:"red",marginBottom:12},children:[ft("strong",{children:"Warning:"})," Never share your private key. Anyone with this key can access your funds."]}),yt("div",{className:"private-key-box",style:{marginBottom:12},children:[ft("input",{type:r?"text":"password",value:e,readOnly:!0,style:{width:"100%",fontSize:16,letterSpacing:1},"aria-label":"Private key"}),ft("button",{onClick:()=>a((e=>!e)),style:{marginLeft:8},children:r?"Hide":"Show"})]}),ft("button",{onClick:()=>{navigator.clipboard.writeText(e),i(!0),setTimeout((()=>i(!1)),2e3)},children:"Copy"}),s&&ft("span",{className:"copy-status",style:{color:"green",marginLeft:8},children:"Copied!"}),ft("button",{className:"secondary-button",onClick:t,style:{marginLeft:12},children:"Close"})]})})},wt={info:{background:"#e3f2fd",color:"#1565c0",icon:"ℹ️"},warning:{background:"#fff3cd",color:"#856404",icon:"⚠️"},danger:{background:"#f8d7da",color:"#721c24",icon:"⛔"}},Nt=({type:e="warning",icon:t,message:n,actions:r,dismissible:a=!1,onDismiss:s})=>{const i=wt[e];return yt("div",{className:"warning-banner",style:{background:i.background,color:i.color,padding:"12px 16px",borderRadius:8,display:"flex",alignItems:"center",marginBottom:12,fontWeight:500,fontSize:15,boxShadow:"0 2px 8px rgba(0,0,0,0.04)"},role:"alert",children:[ft("span",{style:{fontSize:22,marginRight:12},children:t||i.icon}),ft("span",{style:{flex:1},children:n}),r&&ft("span",{style:{marginLeft:16},children:r}),a&&ft("button",{onClick:s,style:{marginLeft:16,background:"none",border:"none",color:i.color,fontSize:18,cursor:"pointer"},"aria-label":"Dismiss warning",children:"×"})]})},kt=({analyticsManager:e})=>{const[t,r]=n.useState(e.getDashboard());n.useEffect((()=>{const t=e=>{r(e)};return e.on("metricsUpdated",t),()=>{e.off("metricsUpdated",t)}}),[e]);const a=e=>`${(100*e).toFixed(2)}%`,s=e=>`${e.toFixed(2)}ms`;return yt("div",{className:"session-analytics-dashboard",children:[ft("h2",{children:"Session Analytics Dashboard"}),yt("div",{className:"real-time-metrics",children:[ft("h3",{children:"Real-time Metrics"}),yt("div",{className:"metric-grid",children:[yt("div",{className:"metric-card",children:[ft("h4",{children:"Connection Success Rate"}),ft("p",{children:a(t.realTimeMetrics.connectionSuccess)})]}),yt("div",{className:"metric-card",children:[ft("h4",{children:"Average Latency"}),ft("p",{children:s(t.realTimeMetrics.averageLatency)})]}),yt("div",{className:"metric-card",children:[ft("h4",{children:"Reconnect Attempts"}),ft("p",{children:t.realTimeMetrics.reconnectAttempts})]})]})]}),yt("div",{className:"historical-data",children:[ft("h3",{children:"Historical Data"}),yt("div",{className:"data-section",children:[ft("h4",{children:"Daily Connection Stats"}),ft("div",{className:"stats-table",children:yt("table",{children:[ft("thead",{children:yt("tr",{children:[ft("th",{children:"Date"}),ft("th",{children:"Total Connections"}),ft("th",{children:"Successful"}),ft("th",{children:"Error Rate"}),ft("th",{children:"Avg Latency"})]})}),ft("tbody",{children:t.historicalData.dailyConnectionStats.map(((e,t)=>yt("tr",{children:[ft("td",{children:e.date}),ft("td",{children:e.totalConnections}),ft("td",{children:e.successfulConnections}),ft("td",{children:a(e.errorCount/e.totalConnections)}),ft("td",{children:s(e.averageLatency)})]},t)))})]})})]}),yt("div",{className:"data-section",children:[ft("h4",{children:"Permission Usage"}),yt("div",{className:"permission-stats",children:[yt("div",{className:"stat-card",children:[ft("h5",{children:"Total Requests"}),ft("p",{children:t.historicalData.permissionUsage.totalRequests})]}),yt("div",{className:"stat-card",children:[ft("h5",{children:"Error Count"}),ft("p",{children:t.historicalData.permissionUsage.errorCount})]})]})]})]}),ft("style",{children:"\n        .session-analytics-dashboard {\n          padding: 20px;\n          font-family: Arial, sans-serif;\n        }\n\n        .metric-grid {\n          display: grid;\n          grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n          gap: 20px;\n          margin: 20px 0;\n        }\n\n        .metric-card {\n          background: #f5f5f5;\n          padding: 15px;\n          border-radius: 8px;\n          box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n        }\n\n        .stats-table {\n          overflow-x: auto;\n          margin: 20px 0;\n        }\n\n        table {\n          width: 100%;\n          border-collapse: collapse;\n        }\n\n        th, td {\n          padding: 10px;\n          text-align: left;\n          border-bottom: 1px solid #ddd;\n        }\n\n        th {\n          background-color: #f5f5f5;\n        }\n\n        .permission-stats {\n          display: grid;\n          grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\n          gap: 15px;\n          margin: 20px 0;\n        }\n\n        .stat-card {\n          background: #f5f5f5;\n          padding: 15px;\n          border-radius: 8px;\n          box-shadow: 0 2px 4px rgba(0,0,0,0.1);\n        }\n\n        h2, h3, h4, h5 {\n          color: #333;\n          margin: 10px 0;\n        }\n\n        p {\n          margin: 5px 0;\n          font-size: 1.2em;\n          color: #666;\n        }\n      "})]})},St=({selectedAccount:e,selectedNetwork:t,networks:r,mevProtection:a,error:s,onSwitchNetwork:i,isLegacy:o,onMigrateLegacy:c,onExportLegacy:l,analyticsManager:d})=>{if(!t||!e)return ft("div",{className:"wallet-content",children:"Loading..."});const[u,h]=n.useState("tokens"),[m,p]=n.useState(!1),[f,y]=n.useState(!1),[g,v]=n.useState(!1),[b,w]=n.useState(""),[N,k]=n.useState(!1),[S,C]=n.useState(""),[x,P]=n.useState(""),[E,$]=n.useState("idle"),[A,L]=n.useState(""),[R,I]=n.useState(""),[_,T]=n.useState(null),[F,O]=n.useState((()=>"true"===localStorage.getItem("freo_has_backed_up_seed"))),[D,U]=n.useState(!1);n.useEffect((()=>{const e=localStorage.getItem("freo_connected_site");e&&(v(!0),w(e))}),[]);const M=null==t?void 0:t.chainId,W=M?null==e?void 0:e.balances[M]:null,z=W?parseFloat(W||"0").toFixed(4):"0.0000";var q;return yt("div",{className:"wallet-content",children:[yt("div",{className:"wallet-header",children:[ft("img",{src:"/logo.png",alt:"FreoWallet",className:"logo",style:{height:32,marginRight:12}}),g?yt("div",{className:"connected-status",style:{display:"flex",alignItems:"center",gap:8},children:[ft("span",{className:"dot green",style:{display:"inline-block",width:10,height:10,borderRadius:"50%",background:"#27ae60",marginRight:4}}),"Connected: ",b,ft("button",{className:"disconnect-btn",onClick:()=>{v(!1),w(""),localStorage.removeItem("freo_connected_site")},style:{marginLeft:8,background:"#eb5757",color:"#fff",border:"none",borderRadius:12,padding:"4px 12px",fontWeight:"bold",cursor:"pointer"},children:"Disconnect"})]}):yt("button",{className:"connect-btn",onClick:async()=>{const e=window.location.hostname||"Current dApp";v(!0),w(e),localStorage.setItem("freo_connected_site",e)},style:{background:"#2d9cdb",color:"#fff",border:"none",borderRadius:20,padding:"8px 20px",fontWeight:"bold",cursor:"pointer"},children:[ft("span",{role:"img","aria-label":"link",children:"🔗"})," Connect Wallet"]})]}),s&&ft("div",{className:"error-message",children:s}),yt("div",{className:"wallet-header",children:[yt("div",{className:"header-top",children:[yt("div",{className:"network-selector",onClick:()=>p(!m),children:[ft("div",{className:"network-indicator"}),ft("span",{children:(null==t?void 0:t.name)||"Select Network"}),ft("span",{className:"chevron-down",children:"▼"}),m&&ft("div",{className:"network-dropdown",children:r.map((e=>yt("div",{className:"network-option "+(e.chainId===(null==t?void 0:t.chainId)?"active":""),onClick:()=>{alert(`[NetworkDropdown] Switching to chainId: ${e.chainId}`),i(e.chainId)},children:[ft("div",{className:"network-option-indicator"}),ft("span",{children:e.name})]},e.chainId)))})]}),yt("button",{className:"menu-button",onClick:()=>y(!f),children:["⋮",f&&yt("div",{className:"menu-dropdown",children:[yt("button",{className:"menu-item",children:[ft("span",{className:"menu-icon",children:"🔔"}),"Notifications"]}),yt("button",{className:"menu-item",children:[ft("span",{className:"menu-icon",children:"👤"}),"Account details"]}),yt("button",{className:"menu-item",children:[ft("span",{className:"menu-icon",children:"🔍"}),"View on explorer"]}),yt("button",{className:"menu-item",children:[ft("span",{className:"menu-icon",children:"⚙️"}),"Settings"]}),yt("button",{className:"menu-item",children:[ft("span",{className:"menu-icon",children:"🔒"}),"Lock FreoWallet"]}),yt("button",{className:"menu-item",onClick:()=>U(!0),children:[ft("span",{className:"menu-icon",children:"🔑"}),"Export Private Key"]})]})]})]}),yt("div",{className:"account-info",children:[ft("span",{className:"account-name",children:null==e?void 0:e.name}),ft("span",{className:"account-address",style:{cursor:"pointer",userSelect:"all"},onClick:()=>{(null==e?void 0:e.address)&&(navigator.clipboard.writeText(e.address),I("Copied!"),setTimeout((()=>I("")),1500))},title:"Click to copy",children:(null==e?void 0:e.address)?(q=e.address,`${q.slice(0,6)}...${q.slice(-4)}`):""}),R&&ft("span",{className:"copy-status",style:{marginLeft:8,color:"green",fontWeight:500},children:R})]})]}),yt("div",{className:"balance-display",children:[yt("h2",{className:"balance-amount",children:[z," ",(null==t?void 0:t.currencySymbol)||"ETH"]}),ft("p",{className:"balance-fiat",children:"$0.00 USD"})]}),yt("div",{className:"action-buttons",children:[yt("button",{className:"action-button",children:[ft("span",{className:"action-icon",children:"↓"}),ft("span",{children:"Buy"})]}),yt("button",{className:"action-button",onClick:()=>k(!0),children:[ft("span",{className:"action-icon",children:"↑"}),ft("span",{children:"Send"})]}),yt("button",{className:"action-button",children:[ft("span",{className:"action-icon",children:"↔"}),ft("span",{children:"Swap"})]}),yt("button",{className:"action-button",children:[ft("span",{className:"action-icon",children:"⋮"}),ft("span",{children:"More"})]})]}),yt("div",{className:"tabs",children:[ft("button",{className:"tab "+("tokens"===u?"active":""),onClick:()=>h("tokens"),children:"Tokens"}),ft("button",{className:"tab "+("nfts"===u?"active":""),onClick:()=>h("nfts"),children:"NFTs"}),ft("button",{className:"tab "+("activity"===u?"active":""),onClick:()=>h("activity"),children:"Activity"}),ft("button",{className:"tab "+("analytics"===u?"active":""),onClick:()=>h("analytics"),children:"Analytics"}),ft("button",{className:"tab "+("mev"===u?"active":""),onClick:()=>h("mev"),children:"MEV Protection"})]}),yt("div",{className:"tab-content",children:["tokens"===u&&yt("div",{className:"token-list",children:[yt("div",{className:"token-item main-token",children:[ft("div",{className:"token-icon eth"}),yt("div",{className:"token-info",children:[ft("span",{className:"token-name",children:"Ethereum"}),yt("span",{className:"token-balance",children:[z," ",(null==t?void 0:t.currencySymbol)||"ETH"]})]}),ft("div",{className:"token-value",children:"$0.00 USD"})]}),yt("div",{className:"empty-state",children:[ft("div",{className:"empty-icon",children:"🔍"}),ft("h3",{children:"No tokens found"}),ft("p",{children:"Get started by adding some tokens to your wallet"}),ft("button",{className:"secondary-button",children:"Import Tokens"})]})]}),"nfts"===u&&yt("div",{className:"empty-state",children:[ft("div",{className:"empty-icon",children:"🖼️"}),ft("h3",{children:"No NFTs found"}),ft("p",{children:"NFTs you receive will appear here"})]}),"activity"===u&&yt("div",{className:"empty-state",children:[ft("div",{className:"empty-icon",children:"📝"}),ft("h3",{children:"No activity yet"}),ft("p",{children:"Your transaction history will appear here"})]}),"analytics"===u&&ft("div",{style:{padding:"10px"},children:d?ft(kt,{analyticsManager:d}):ft("p",{children:"Analytics dashboard coming soon."})}),"mev"===u&&yt("div",{style:{padding:"10px"},children:[ft("h3",{children:"MEV Protection Settings"}),a?yt("ul",{children:[yt("li",{children:[ft("b",{children:"Max Slippage:"})," ",a.maxSlippage,"%"]}),yt("li",{children:[ft("b",{children:"Use Private Pools:"})," ",a.usePrivatePools?"Yes":"No"]}),yt("li",{children:[ft("b",{children:"Flashbot Protection:"})," ",a.flashbotProtection?"Enabled":"Disabled"]})]}):ft("p",{children:"No MEV protection settings available for this network."})]})]}),N&&ft("div",{className:"modal-overlay",children:yt("div",{className:"modal",children:[ft("h2",{children:"Send ETH"}),yt("form",{onSubmit:async e=>{e.preventDefault(),$("pending"),L("");try{if(!S||!x)throw new Error("Recipient and amount required");$("success"),C(""),P(""),setTimeout((()=>k(!1)),1500)}catch(t){$("error"),L(t.message||"Failed to send transaction")}},children:[ft("label",{children:"Recipient Address"}),ft("input",{type:"text",value:S,onChange:e=>C(e.target.value),required:!0}),ft("label",{children:"Amount (ETH)"}),ft("input",{type:"number",value:x,onChange:e=>P(e.target.value),required:!0,min:"0",step:"any"}),ft("button",{type:"submit",disabled:"pending"===E,children:"Send"}),ft("button",{type:"button",onClick:()=>k(!1),children:"Cancel"})]}),"pending"===E&&ft("p",{children:"Sending..."}),"success"===E&&ft("p",{children:"Transaction sent!"}),"error"===E&&ft("p",{className:"error-message",children:A})]})}),D&&_&&ft(bt,{privateKey:_,onClose:()=>{U(!1),T(null)}}),!F&&ft(Nt,{type:"warning",icon:"⚠️",message:yt(pt,{children:[ft("strong",{children:"Backup Required:"})," If you remove or reset this extension without backing up your seed phrase, you will lose access to your funds forever."]}),actions:ft("button",{className:"secondary-button",onClick:()=>{localStorage.setItem("freo_has_backed_up_seed","true"),O(!0)},children:"Mark as Backed Up"})}),o&&ft(Nt,{type:"danger",icon:"⛔",message:yt(pt,{children:[ft("strong",{children:"Legacy Wallet:"})," Your wallet is not recoverable if you remove or reset this extension. Please migrate or export your private key now."]}),actions:yt(pt,{children:[ft("button",{className:"link-button",onClick:c,children:"Migrate"}),ft("button",{className:"link-button",onClick:l,style:{marginLeft:8},children:"Export Private Key"})]})})]})};class Ct extends Error{constructor(e,t,n){super(t),this.code=e,this.details=n,this.name="WalletError"}}const xt=class e extends o.EventEmitter{constructor(n=new Map){super(),t(this,"chainConfigs"),t(this,"networkStates"),t(this,"debounceTimeout",null),this.chainConfigs=new Map(e.DEFAULT_CHAIN_CONFIGS),n.forEach(((e,t)=>{this.chainConfigs.set(t,e)})),this.networkStates=new Map}async switchNetwork(t){this.debounceTimeout&&clearTimeout(this.debounceTimeout),this.debounceTimeout=setTimeout((async()=>{try{const e=this.chainConfigs.get(t);if(!e)throw new Ct("UNSUPPORTED_CHAIN",`Unsupported chain ID: ${t}`);const n=await this.initializeNetworkState(t);this.networkStates.set(t,n),this.emit("networkSwitched",{chainId:t,state:n,config:e})}catch(e){throw this.emit("networkSwitchError",{chainId:t,error:e}),e}}),e.DEBOUNCE_DELAY)}async validateTransaction(e,t){var n,r;const a=this.chainConfigs.get(e);if(!a)return["Unsupported chain ID"];const s=[],i=a.validationRules;return t.gasLimit&&Number(t.gasLimit)<i.minGasLimit&&s.push(`Gas limit below minimum required (${i.minGasLimit})`),t.gasLimit&&Number(t.gasLimit)>i.maxGasLimit&&s.push(`Gas limit exceeds maximum allowed (${i.maxGasLimit})`),a.mevProtection&&a.mevProtection.usePrivatePools&&!(null==(n=t.data)?void 0:n.includes("0x"))&&s.push("Transaction must use private pools for MEV protection"),(null==(r=a.gasOptimization)?void 0:r.useEIP1559)&&(t.maxFeePerGas&&t.maxPriorityFeePerGas||s.push("EIP-1559 transaction must include maxFeePerGas and maxPriorityFeePerGas")),s}async getNetworkState(e){return this.networkStates.get(e)||null}async updateNetworkState(e,t){const n=this.networkStates.get(e);if(!n)throw new Ct("INVALID_CHAIN",`No state found for chain ID: ${e}`);const r={...n,...t};this.networkStates.set(e,r),this.emit("networkStateUpdated",{chainId:e,state:r})}async initializeNetworkState(e){const t=this.chainConfigs.get(e);if(!t)throw new Ct("INVALID_CHAIN",`Invalid chain ID: ${e}`);return{chainId:e,isConnected:!0,lastBlockNumber:0,gasPrice:0,validationErrors:[],mevProtection:t.mevProtection,gasOptimization:t.gasOptimization,rpcOptimization:t.rpcOptimization}}cleanup(){this.debounceTimeout&&clearTimeout(this.debounceTimeout),this.networkStates.clear()}};t(xt,"DEBOUNCE_DELAY",500),t(xt,"DEFAULT_CHAIN_CONFIGS",new Map([["0x1",{chainId:"0x1",name:"Ethereum Mainnet",rpcUrls:["https://mainnet.infura.io/v3/"],blockExplorerUrl:"https://etherscan.io",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},validationRules:{maxGasPrice:1e3,minGasLimit:21e3,maxGasLimit:8e6,supportedTransactionTypes:["legacy","eip1559"],requiredConfirmations:12},mevProtection:{maxSlippage:.5,usePrivatePools:!0,flashbotProtection:!0},gasOptimization:{useEIP1559:!0,maxPriorityFee:2,baseFeeMultiplier:1.2},rpcOptimization:{useMultipleProviders:!0,failoverStrategy:"latency-based",healthCheckInterval:3e4}}]]));let Pt=xt;const Et=({onRestore:e,error:t})=>{const[r,a]=n.useState(""),[s,i]=n.useState(""),[o,l]=n.useState(""),[d,u]=n.useState(null),[h,m]=n.useState(!1);return yt("div",{className:"restore-wallet",children:[ft("h2",{children:"Restore Your Wallet"}),ft("p",{className:"subtitle",children:"Enter your 12-word seed phrase to restore your wallet"}),yt("form",{onSubmit:async t=>{if(t.preventDefault(),u(null),r&&s)if(r.length<8)u("Password must be at least 8 characters long");else if(r===s)if(o.trim())if((e=>{try{return c(e.trim())}catch{return!1}})(o))try{m(!0),await e(r,o.trim())}catch(n){u(n instanceof Error?n.message:"Failed to restore wallet")}finally{m(!1)}else u("Invalid seed phrase. Please check and try again.");else u("Please enter your seed phrase");else u("Passwords do not match");else u("Please enter both password fields")},children:[(t||d)&&ft("div",{className:"error-message",role:"alert",children:t||d}),yt("div",{className:"form-group",children:[ft("label",{htmlFor:"mnemonic",children:"Seed Phrase"}),ft("textarea",{id:"mnemonic",value:o,onChange:e=>l(e.target.value),placeholder:"Enter your 12-word seed phrase",rows:3,disabled:h,required:!0}),ft("small",{className:"input-help",children:"Enter the 12 words in order, separated by spaces"})]}),yt("div",{className:"form-group",children:[ft("label",{htmlFor:"password",children:"New Password"}),ft("input",{type:"password",id:"password",value:r,onChange:e=>a(e.target.value),placeholder:"Create a new password (min. 8 characters)",disabled:h,required:!0,minLength:8}),ft("small",{className:"input-help",children:"This password will be used to protect your restored wallet"})]}),yt("div",{className:"form-group",children:[ft("label",{htmlFor:"confirmPassword",children:"Confirm New Password"}),ft("input",{type:"password",id:"confirmPassword",value:s,onChange:e=>i(e.target.value),placeholder:"Enter the same password again",disabled:h,required:!0,minLength:8})]}),ft("button",{type:"submit",className:"restore-button",disabled:h,children:h?"Restoring...":"Restore Wallet"})]}),ft("div",{className:"security-warning",children:ft("p",{children:"⚠️ Never share your seed phrase with anyone. It provides full access to your wallet and funds."})})]})},$t=({onUnlock:e,error:t})=>{const[r,a]=n.useState(""),[s,i]=n.useState(null),[o,c]=n.useState(!1);return yt("div",{className:"unlock-wallet",children:[ft("h2",{children:"Unlock Your Wallet"}),yt("form",{onSubmit:async t=>{if(t.preventDefault(),i(null),r){c(!0);try{await e(r)}catch(n){i("Incorrect password. Please try again.")}finally{c(!1)}}else i("Please enter your password.")},children:[(t||s)&&ft("div",{className:"error-message",role:"alert",children:t||s}),yt("div",{className:"form-group",children:[ft("label",{htmlFor:"password",children:"Password"}),ft("input",{type:"password",id:"password",value:r,onChange:e=>a(e.target.value),placeholder:"Enter your password",disabled:o,required:!0})]}),ft("button",{type:"submit",className:"connect-button",disabled:o,children:o?"Unlocking...":"Unlock Wallet"})]})]})},At=({mnemonic:e,onConfirm:t})=>{const[r,a]=n.useState(!1),[s,i]=n.useState(!1);return ft("div",{className:"modal-overlay",children:yt("div",{className:"modal-content",children:[ft("h2",{children:"Your Seed Phrase"}),ft("div",{className:"seed-phrase-box",tabIndex:0,"aria-label":"Seed phrase",style:{userSelect:"none",fontWeight:600,fontSize:18,letterSpacing:1},children:e}),yt("div",{className:"seed-actions",style:{margin:"12px 0"},children:[ft("button",{onClick:()=>{navigator.clipboard.writeText(e),a(!0),setTimeout((()=>a(!1)),2e3)},children:"Copy"}),ft("button",{onClick:()=>{const t=new Blob([e],{type:"text/plain"}),n=URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download="freowallet-seed.txt",r.click(),URL.revokeObjectURL(n)},children:"Download"}),r&&ft("span",{className:"copy-status",style:{color:"green",marginLeft:8},children:"Copied!"})]}),yt("div",{className:"backup-confirm",style:{margin:"12px 0"},children:[ft("input",{type:"checkbox",id:"confirm-backup",checked:s,onChange:e=>i(e.target.checked)}),ft("label",{htmlFor:"confirm-backup",style:{marginLeft:8},children:"I understand that losing my seed phrase means losing access to my funds."})]}),ft("button",{className:"connect-button",onClick:t,disabled:!s,children:"Continue"})]})})},Lt=({isCreating:e,error:t,onCreateWallet:r})=>{const[a,s]=n.useState(""),[i,o]=n.useState(""),[c,d]=n.useState(null),[u,h]=n.useState("password"),[m,p]=n.useState(""),[f,y]=n.useState(!1);return"password"===u?ft("div",{className:"popup-content",children:yt("form",{onSubmit:async e=>{if(e.preventDefault(),d(null),!a||!i)return void d("Please enter both password fields");if(a.length<8)return void d("Password must be at least 8 characters long");if(a!==i)return void d("Passwords do not match");const t=l.createRandom();p(t.mnemonic.phrase),h("show"),y(!0)},children:[(t||c)&&ft("div",{className:"error-message",role:"alert",children:t||c}),yt("div",{className:"form-group",children:[ft("label",{htmlFor:"password",children:"Create Password"}),ft("input",{type:"password",id:"password",value:a,onChange:e=>s(e.target.value),placeholder:"Create a strong password (min. 8 characters)",disabled:e,required:!0,minLength:8}),ft("small",{className:"input-help",children:"This password will be used to protect your wallet"})]}),yt("div",{className:"form-group",children:[ft("label",{htmlFor:"confirmPassword",children:"Confirm New Password"}),ft("input",{type:"password",id:"confirmPassword",value:i,onChange:e=>o(e.target.value),placeholder:"Enter the same password again",disabled:e,required:!0,minLength:8})]}),ft("button",{className:"connect-button "+(e?"loading":""),type:"submit",disabled:e,"aria-busy":e,children:e?"Creating Wallet...":"Create New Wallet"})]})}):f&&m?ft(At,{mnemonic:m,onConfirm:async()=>{y(!1),await r(a,m)}}):null};class Rt extends o.EventEmitter{constructor(){super(),t(this,"metrics",new Map),t(this,"connectionStats",[]),t(this,"networkSwitches",[]),t(this,"permissionUsage",{totalRequests:0,byMethod:{},byOrigin:{},errorCount:0}),this.initializeDailyStats()}initializeDailyStats(){const e=(new Date).toISOString().split("T")[0];this.connectionStats.push({date:e,totalConnections:0,successfulConnections:0,averageLatency:0,errorCount:0})}trackRequest(e,t,n,r){const a=this.metrics.get(e)||{totalRequests:0,successfulRequests:0,failedRequests:0,averageLatency:0,errorRate:0,lastUpdated:Date.now()};a.totalRequests++,n?a.successfulRequests++:a.failedRequests++,a.averageLatency=(a.averageLatency*(a.totalRequests-1)+r)/a.totalRequests,a.errorRate=a.failedRequests/a.totalRequests,a.lastUpdated=Date.now(),this.metrics.set(e,a),this.permissionUsage.totalRequests++,this.permissionUsage.byMethod[t]=(this.permissionUsage.byMethod[t]||0)+1,this.permissionUsage.byOrigin[e]=(this.permissionUsage.byOrigin[e]||0)+1,n||this.permissionUsage.errorCount++;const s=(new Date).toISOString().split("T")[0],i=this.connectionStats[this.connectionStats.length-1];i.date!==s?this.initializeDailyStats():(i.totalConnections++,n?i.successfulConnections++:i.errorCount++,i.averageLatency=(i.averageLatency*(i.totalConnections-1)+r)/i.totalConnections),this.emit("metricsUpdated",this.getDashboard())}trackNetworkSwitch(e,t,n,r){this.networkSwitches.push({timestamp:Date.now(),fromChainId:e,toChainId:t,success:n,latency:r}),this.emit("metricsUpdated",this.getDashboard())}getDashboard(){return{realTimeMetrics:{connectionSuccess:this.calculateConnectionSuccess(),averageLatency:this.calculateAverageLatency(),reconnectAttempts:this.calculateReconnectAttempts(),errorFrequency:this.calculateErrorFrequency()},historicalData:{dailyConnectionStats:this.connectionStats,networkSwitches:this.networkSwitches,permissionUsage:this.permissionUsage}}}calculateConnectionSuccess(){let e=0,t=0;return this.metrics.forEach((n=>{e+=n.totalRequests,t+=n.successfulRequests})),e>0?t/e:0}calculateAverageLatency(){let e=0,t=0;return this.metrics.forEach((n=>{e+=n.averageLatency,t++})),t>0?e/t:0}calculateReconnectAttempts(){return this.connectionStats.reduce(((e,t)=>e+t.errorCount),0)}calculateErrorFrequency(){const e={};return this.metrics.forEach(((t,n)=>{e[n]=t.errorRate})),e}}const It=()=>{const[e,t]=n.useState(!1),[r,a]=n.useState(null),[s,o]=n.useState(null),[c,l]=n.useState([]),[d,u]=n.useState(!0),[h,m]=n.useState(""),[p,f]=n.useState(!1),[y,g]=n.useState(!1),[v,b]=n.useState(null),[w,N]=n.useState(!1),[k,S]=n.useState(!1),[C,x]=n.useState(!1),[P,E]=n.useState(!1),[$,A]=n.useState(!0),L=new Pt,R=new Rt;n.useEffect((()=>{(async()=>{const e=await i.hasWallet();g(e),u(!1)})()}),[]),n.useEffect((()=>{(async()=>{try{const e=await i.hasWallet();if(g(e),!e)return void u(!1);const n=await i.getState();if(t(n.isUnlocked),n.isUnlocked&&n.selectedAccount&&n.selectedNetwork){a(n.selectedAccount),o(n.selectedNetwork),l(n.networks);const e=await L.initializeNetworkState(n.selectedNetwork.chainId);b(e.mevProtection);const t=await i.getState();t.accounts&&t.accounts.length>0&&!(await i.hasWallet())&&N(!0)}}catch(e){m("Failed to initialize wallet: "+(e instanceof Error?e.message:String(e)))}finally{u(!1)}})()}),[]);const I=()=>{x(!0),S(!1),f(!1),A(!1)},_=()=>{t(!1),S(!0),A(!1)};return d?ft("div",{className:"popup-container",children:yt("div",{className:"loading-container",children:[ft("div",{className:"loading-spinner"}),ft("p",{children:"Loading wallet..."})]})}):yt("div",{className:"popup-container",children:[h&&ft("div",{className:"error-message",children:h}),$?ft(vt,{onGetStarted:I,onConnect:_}):p?ft(Et,{onRestore:async(e,n)=>{m("");try{await i.createWallet(e,!0,n);const r=await i.getState();if(t(r.isUnlocked),g(!0),r.selectedAccount&&r.selectedNetwork){a(r.selectedAccount),o(r.selectedNetwork),l(r.networks);const e=await L.initializeNetworkState(r.selectedNetwork.chainId);b(e.mevProtection)}f(!1)}catch(r){m("Failed to restore wallet. Please check your seed phrase and try again.")}},error:h}):C?ft(Lt,{onCreateWallet:async(e,n)=>{m("");try{await i.createWallet(e,!1,n);const r=await i.getState();t(r.isUnlocked),g(!0),x(!1),r.selectedAccount&&r.selectedNetwork&&(a(r.selectedAccount),o(r.selectedNetwork),l(r.networks))}catch(r){m("Failed to create wallet. Please try again.")}},error:h,isCreating:P,setIsCreating:E}):y?e?ft(St,{selectedAccount:r,selectedNetwork:s,networks:c,mevProtection:v,error:h,onSwitchNetwork:async e=>{try{m(""),await i.setNetwork(e);const t=await i.getState();o(t.selectedNetwork);const n=await L.initializeNetworkState(e);b(n.mevProtection)}catch(t){m(t&&t.message?t.message:String(t))}},isLegacy:w,onMigrateLegacy:async()=>{},onExportLegacy:()=>{},analyticsManager:R}):k?yt(pt,{children:[ft($t,{onUnlock:async e=>{m("");try{if(await i.unlockWallet(e)){t(!0);const e=await i.getState();a(e.selectedAccount||null),o(e.selectedNetwork||null),l(e.networks)}else m("Incorrect password. Please try again.")}catch(n){m("Failed to unlock wallet.")}},error:h}),ft("div",{style:{textAlign:"center",marginTop:"1em"},children:ft("button",{className:"action-button tertiary",onClick:()=>{f(!0),S(!1),A(!1),x(!1)},children:"Forgot password? Restore with seed phrase"})})]}):ft(vt,{onGetStarted:I,onConnect:_}):ft(vt,{onGetStarted:I,onConnect:_})]})},_t=document.getElementById("root");if(!_t)throw new Error("Failed to find the root element");it(_t).render(ft(s.StrictMode,{children:ft(It,{})}));
